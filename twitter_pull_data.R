#load the necessary packages

library(rtweet)

datestring <- c("202003110000", "202003152359", "202003160000", "202003202359", "202003210000", "202003252359", "202003260000", "202003302359", "202003310000", "202004042359", "202004050000", "202004092359", "202004100000", "202004142359", "202004150000", "202004192359", "202004200000", "202004242359", "202004250000", "202004292359", "202004300000", "202005042359", "202005050000", "202005092359", "202005100000", "202005142359", "202005150000", "202005192359", "202005200000", "202005242359", "202005250000", "202005292359", "202005300000", "202006032359", "202006040000", "202006082359", "202006090000", "202006132359", "202006140000", "202006182359", "202006190000", "202006232359", "202006240000", "202006282359", "202006290000", "202007032359", "202007040000", "202007082359", "202007090000", "202007132359", "202007140000", "202007182359", "202007190000", "202007232359", "202007240000", "202007282359", "202007290000", "202008022359", "202008030000", "202008072359", "202008080000", "202008122359", "202008130000", "202008172359", "202008180000", "202008222359", "202008230000", "202008272359", "202008280000", "202009012359", "202009020000", "202009062359", "202009070000", "202009112359", "202009120000", "202009162359", "202009170000", "202009212359", "202009220000", "202009262359", "202009270000", "202010012359", "202010020000", "202010062359", "202010070000", "202010112359")

full_frame = search_30day('covid abbott test', n=2000, env_name = "research", token=my_token)

i = 1
while (i < length(datestring)) {
  fromDate = datestring[i]
  toDate = datestring[i+1]
  tweets = search_fullarchive("covid abbott test", n=100, fromDate=fromDate, toDate=toDate, env_name = "research", token=my_token)
  full_frame = rbind(full_frame, tweets)
  i = i + 2
}

write_as_csv(full_frame, "all_tweets.csv")